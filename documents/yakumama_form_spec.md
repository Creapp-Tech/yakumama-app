# ESPECIFICACI√ìN T√âCNICA - FORMULARIO DE EVALUACI√ìN YAKUMAMA LIFESTYLE

## CONTEXTO PARA EL AGENTE

Debes desarrollar un formulario de evaluaci√≥n inicial para el programa "Yakumama Lifestyle" que eval√∫a el bienestar cognitivo de los usuarios. Este formulario tiene una duraci√≥n aproximada de 7-10 minutos y recopila informaci√≥n demogr√°fica, cl√≠nica, de h√°bitos y objetivos del usuario.

**IMPORTANTE**: Este formulario es la base para calcular el **√çndice de Bienestar Cognitivo Yakumama (IBCY)** y generar un gr√°fico radar personalizado que muestra el estado del usuario en tres dimensiones: Estado Cognitivo Funcional (ECF), Estado F√≠sico para el Cerebro (EFC), y Nutrici√≥n para la Salud Cerebral (NSC).

---

## 1. ESTRUCTURA DEL FORMULARIO

El formulario est√° dividido en **10 secciones (A-J)** con **35 preguntas totales**.

---

## SECCI√ìN A: INFORMACI√ìN GENERAL

### Pregunta 1: Nombre completo
- **Tipo**: Texto corto (input text)
- **Obligatorio**: S√≠
- **Validaci√≥n**: M√≠nimo 2 caracteres

### Pregunta 2: Fecha de nacimiento
- **Tipo**: Fecha
- **Obligatorio**: S√≠
- **Validaci√≥n**: Entre 18 y 100

### Pregunta 3: Sexo
- **Tipo**: Radio
- **Obligatorio**: S√≠
- **Opciones**: Masculino, Femenino, Otro

### Pregunta 4: Ciudad / Pa√≠s
- **Tipo**: Texto corto
- **Obligatorio**: S√≠

### Pregunta 5: Ocupaci√≥n actual
- **Tipo**: Texto corto
- **Obligatorio**: S√≠

### Pregunta 6: Correo electr√≥nico
- **Tipo**: Email
- **Obligatorio**: S√≠
- **Validaci√≥n**: Formato email 

### Pregunta 7: Tel√©fono
- **Tipo**: Texto corto
- **Obligatorio**: No

### Pregunta 8: Horas de trabajo semanales
- **Tipo**: n√∫mero
- **Obligatorio**: No

### Pregunta 9: Doy mi consentimiento informado
- **Tipo**: Checkbox
- **Obligatorio**: S√≠

### Pregunta 10: Acepto pol√≠tica de privacidad
- **Tipo**: Checkbox
- **Obligatorio**: S√≠

---

## SECCI√ìN B: TUS OBJETIVOS CON YAKUMAMA LIFESTYLE

### Pregunta 6: ¬øCu√°les son tus objetivos principales con este programa?
- **Tipo**: Checkbox m√∫ltiple (permite seleccionar varios)
- **Obligatorio**: S√≠ (al menos 1 opci√≥n)
- **Opciones**:
  - Recuperar energ√≠a
  - Ser m√°s productivo
  - Mejorar enfoque y claridad mental
  - Manejar mejor el estr√©s
  - Elevar bienestar emocional
  - Mejorar equilibrio hormonal / vitalidad sexual
  - Fortalecer la inmunidad
  - Otro (especificar) - **si selecciona "Otro", mostrar campo de texto corto**

---

## SECCI√ìN C: AUTOEVALUACI√ìN DE BIENESTAR COGNITIVO

**Introducci√≥n de secci√≥n**: "Estas preguntas eval√∫an c√≥mo te sientes en tu d√≠a a d√≠a respecto a enfoque, memoria y claridad mental."

### Pregunta 7: ¬øCon qu√© frecuencia te cuesta mantener la concentraci√≥n en tareas importantes?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Nunca
  - 2 = Rara vez
  - 3 = A veces
  - 4 = Con frecuencia
  - 5 = Siempre
- **Nota**: Pregunta NEGATIVA (mayor valor = peor bienestar)

### Pregunta 8: ¬øCon qu√© frecuencia sientes "mente nublada" o falta de claridad mental?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: Igual que Q7
- **Nota**: Pregunta NEGATIVA

### Pregunta 9: ¬øQu√© tan f√°cil te resulta recordar informaci√≥n reciente (nombres, tareas, instrucciones)?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Muy dif√≠cil
  - 2 = Dif√≠cil
  - 3 = Neutral
  - 4 = F√°cil
  - 5 = Muy f√°cil
- **Nota**: Pregunta POSITIVA

### Pregunta 10: ¬øCon qu√© frecuencia te distraes mientras trabajas o estudias?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: Igual que Q7
- **Nota**: Pregunta NEGATIVA

### Pregunta 11: ¬øQu√© tan productivo(a) te sientes durante el d√≠a?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Nada productivo
  - 2 = Poco productivo
  - 3 = Moderadamente productivo
  - 4 = Productivo
  - 5 = Muy productivo
- **Nota**: Pregunta POSITIVA

### Pregunta 12: ¬øQu√© tan satisfecho(a) est√°s con tu nivel actual de atenci√≥n y enfoque?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Muy insatisfecho
  - 2 = Insatisfecho
  - 3 = Neutral
  - 4 = Satisfecho
  - 5 = Muy satisfecho
- **Nota**: Pregunta POSITIVA

---

## SECCI√ìN D: ESTR√âS, EMOCIONES Y SUE√ëO

### Pregunta 13: En las √∫ltimas dos semanas, ¬øcon qu√© frecuencia te sentiste estresado(a)?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: Igual que Q7
- **Nota**: Pregunta NEGATIVA

### Pregunta 14: ¬øQu√© tan bien manejas actualmente el estr√©s?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Muy mal
  - 2 = Mal
  - 3 = Regular
  - 4 = Bien
  - 5 = Muy bien
- **Nota**: Pregunta POSITIVA (NO se usa en c√°lculos, solo informativa)

### Pregunta 15: ¬øC√≥mo describir√≠as tu calidad de sue√±o?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Muy mala
  - 2 = Mala
  - 3 = Regular
  - 4 = Buena
  - 5 = Excelente
- **Nota**: Pregunta POSITIVA (NO se usa en c√°lculos, solo informativa)

### Pregunta 16: ¬øCu√°ntas horas duermes normalmente por noche?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - Menos de 5 horas
  - 5-6 horas
  - 6-7 horas
  - 7-8 horas
  - M√°s de 8 horas
- **Nota**: Solo informativa

### Pregunta 17: ¬øDespiertas sinti√©ndote descansado(a)?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Nunca
  - 2 = Rara vez
  - 3 = A veces
  - 4 = Con frecuencia
  - 5 = Siempre
- **Nota**: Pregunta POSITIVA

---

## SECCI√ìN E: ESTADO F√çSICO Y ACTIVIDAD

### Pregunta 18: ¬øCu√°ntos d√≠as a la semana haces actividad f√≠sica?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - 0 d√≠as
  - 1-2 d√≠as
  - 3-4 d√≠as
  - 5 o m√°s d√≠as

### Pregunta 19: ¬øQu√© tipo de actividad realizas con m√°s frecuencia?
- **Tipo**: Opci√≥n m√∫ltiple (radio) - seleccionar la principal
- **Obligatorio**: S√≠
- **Opciones**:
  - Caminar
  - Gimnasio (pesas/m√°quinas)
  - Correr
  - Ciclismo
  - Yoga/Pilates
  - Deportes (f√∫tbol, tenis, etc.)
  - Ninguna
  - Otro (especificar)

### Pregunta 20: ¬øC√≥mo evaluar√≠as tu nivel f√≠sico actual?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Muy bajo
  - 2 = Bajo
  - 3 = Moderado
  - 4 = Alto
  - 5 = Muy alto
- **Nota**: Pregunta POSITIVA

### Pregunta 21: ¬øTienes alguna limitaci√≥n f√≠sica relevante?
- **Tipo**: Texto largo (textarea)
- **Obligatorio**: No
- **Placeholder**: "Describe cualquier lesi√≥n, condici√≥n o limitaci√≥n f√≠sica que debamos considerar"

---

## SECCI√ìN F: H√ÅBITOS DE NUTRICI√ìN CEREBRAL

### Pregunta 22: ¬øCon qu√© frecuencia consumes pescado (sierra, at√∫n, macarela, sardinas)?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - Nunca
  - 1 vez al mes
  - 1 vez a la semana
  - 2-3 veces por semana
  - M√°s de 3 veces por semana

### Pregunta 23: ¬øCon qu√© frecuencia consumes aguacate?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Nunca
  - 2 = Rara vez
  - 3 = A veces
  - 4 = Con frecuencia
  - 5 = Muy frecuentemente
- **Nota**: Pregunta POSITIVA

### Pregunta 24: ¬øConsumes frutas y verduras diariamente?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - S√≠
  - No
  - A veces

### Pregunta 25: ¬øCu√°ntas veces a la semana consumes alimentos ultraprocesados (snacks, fritos, comidas r√°pidas)?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - 0 veces
  - 1-2 veces
  - 3-4 veces
  - 5 o m√°s veces
- **Nota**: Pregunta NEGATIVA (m√°s consumo = peor score)

### Pregunta 26: ¬øQu√© tan saludable consideras tu alimentaci√≥n actual?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Muy poco saludable
  - 2 = Poco saludable
  - 3 = Moderadamente saludable
  - 4 = Saludable
  - 5 = Muy saludable
- **Nota**: Pregunta POSITIVA

---

## SECCI√ìN G: PRUEBAS COGNITIVAS B√ÅSICAS (AUTOEVALUADAS)

**Introducci√≥n de secci√≥n**: "Estas pruebas NO son diagn√≥sticas. Solo buscan conocer tu punto de partida."

### Pregunta 27: Prueba r√°pida de memoria inmediata
- **Tipo**: Texto largo (textarea)
- **Obligatorio**: S√≠
- **Instrucciones a mostrar**:
  ```
  Te mostraremos una lista de palabras. L√©elas UNA VEZ. 
  Luego (sin volver a mirar), escribe todas las que recuerdes en el campo de abajo.
  
  Lista de palabras:
  Sol ‚Äì Agua ‚Äì Libro ‚Äì Verde ‚Äì Camino ‚Äì Nube ‚Äì Tiempo ‚Äì Mano
  
  (Debes implementar que el usuario no pueda copiar/pegar estas palabras)
  ```
- **Placeholder**: "Escribe aqu√≠ las palabras que recuerdas, separadas por comas o espacios"
- **Validaci√≥n backend**: Contar cu√°ntas de las 8 palabras originales est√°n presentes (ignorar may√∫sculas/min√∫sculas, acentos, espacios extra)

### Pregunta 28: Prueba de velocidad mental
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Texto**: "Cuando trabajas en tareas f√°ciles, ¬øqu√© tan r√°pido sientes que procesas la informaci√≥n?"
- **Opciones**: 
  - 1 = Muy lento
  - 2 = Lento
  - 3 = Normal
  - 4 = R√°pido
  - 5 = Muy r√°pido
- **Nota**: Pregunta POSITIVA

### Pregunta 29: Prueba de claridad mental
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Texto**: "Ahora eval√∫a tu claridad mental actual:"
- **Opciones**: 
  - 1 = Totalmente nublada
  - 2 = Algo nublada
  - 3 = Neutral
  - 4 = Clara
  - 5 = Muy clara
- **Nota**: Pregunta POSITIVA

---

## SECCI√ìN H: TECNOLOG√çA Y USO DE REDES

### Pregunta 30: ¬øTienes Instagram activo?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - S√≠
  - No

### Pregunta 31: ¬øTe sientes c√≥modo(a) grabando videos cortos de tus rutinas?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - S√≠
  - No
  - Prefiero fotos

### Pregunta 32: ¬øEst√°s dispuesto(a) a enviar tus evidencias (videos/fotos) por Instagram DM o publicaciones etiquetadas?
- **Tipo**: Opci√≥n m√∫ltiple (radio)
- **Obligatorio**: S√≠
- **Opciones**:
  - S√≠
  - No

---

## SECCI√ìN I: COMPROMISO Y ADHERENCIA

### Pregunta 33: ¬øQu√© tan comprometido(a) est√°s a realizar el programa Yakumama LyfeStyle durante 3 meses?
- **Tipo**: Escala Likert 1-5
- **Obligatorio**: S√≠
- **Opciones**: 
  - 1 = Poco comprometido
  - 2 = Algo comprometido
  - 3 = Moderadamente comprometido
  - 4 = Comprometido
  - 5 = Muy comprometido
- **Nota**: Solo informativa

### Pregunta 34: ¬øQu√© te motiva a iniciar este proceso?
- **Tipo**: Texto largo (textarea)
- **Obligatorio**: S√≠
- **Placeholder**: "Cu√©ntanos qu√© te llev√≥ a querer mejorar tu bienestar cognitivo..."
- **Validaci√≥n**: M√≠nimo 50 caracteres

---

## SECCI√ìN J: CONSENTIMIENTO

### Pregunta 35: Consentimiento informado
- **Tipo**: Checkbox √∫nico
- **Obligatorio**: S√≠ (debe estar marcado para enviar)
- **Texto**: "Confirmo que participo voluntariamente en esta evaluaci√≥n y autorizo el uso de mis respuestas para la personalizaci√≥n del programa y an√°lisis interno."
- **Opciones**: 
  - S√≠, acepto

---

## 2. SISTEMA DE PUNTUACI√ìN Y C√ÅLCULO DEL IBCY

### 2.1 NORMALIZACI√ìN A ESCALA 0-100

**Regla general para preguntas Likert 1-5:**

#### Para preguntas POSITIVAS (mayor valor = mejor bienestar):
```
score = (respuesta - 1) * 25
```
Ejemplos:
- Respuesta 1 ‚Üí 0 puntos
- Respuesta 2 ‚Üí 25 puntos
- Respuesta 3 ‚Üí 50 puntos
- Respuesta 4 ‚Üí 75 puntos
- Respuesta 5 ‚Üí 100 puntos

#### Para preguntas NEGATIVAS (mayor valor = peor bienestar):
```
score = (5 - respuesta) * 25
```
Ejemplos:
- Respuesta 1 ‚Üí 100 puntos
- Respuesta 2 ‚Üí 75 puntos
- Respuesta 3 ‚Üí 50 puntos
- Respuesta 4 ‚Üí 25 puntos
- Respuesta 5 ‚Üí 0 puntos

---

### 2.2 C√ÅLCULO DEL ECF (Estado Cognitivo Funcional)

**Preguntas implicadas**: 7, 8, 9, 10, 11, 12, 13, 17, 27, 28, 29

#### Tabla de Transformaci√≥n por Pregunta:

| Pregunta | Tipo | Transformaci√≥n | Peso en ECF | Categor√≠a |
|----------|------|----------------|-------------|-----------|
| Q7 | Likert 1-5 (negativa) | `score7 = (5 - r7) * 25` | 10% | Atenci√≥n |
| Q8 | Likert 1-5 (negativa) | `score8 = (5 - r8) * 25` | 10% | Atenci√≥n |
| Q10 | Likert 1-5 (negativa) | `score10 = (5 - r10) * 25` | 10% | Atenci√≥n |
| Q9 | Likert 1-5 (positiva) | `score9 = (r9 - 1) * 25` | 10% | Memoria |
| Q27 | Palabras (0-8) | Ver tabla abajo | 10% | Memoria |
| Q12 | Likert 1-5 (positiva) | `score12 = (r12 - 1) * 25` | 10% | Claridad |
| Q29 | Likert 1-5 (positiva) | `score29 = (r29 - 1) * 25` | 10% | Claridad |
| Q11 | Likert 1-5 (positiva) | `score11 = (r11 - 1) * 25` | 10% | Productividad |
| Q13 | Likert 1-5 (negativa) | `score13 = (5 - r13) * 25` | 10% | Estr√©s/Sue√±o |
| Q17 | Likert 1-5 (positiva) | `score17 = (r17 - 1) * 25` | 10% | Estr√©s/Sue√±o |
| Q28 | Likert 1-5 (positiva) | `score28 = (r28 - 1) * 25` | Opcional | (puede sumarse a Memoria o Claridad) |

#### Puntuaci√≥n Q27 (Memoria inmediata):

| Palabras recordadas | Score |
|---------------------|-------|
| 0-2 palabras | 20 |
| 3-4 palabras | 50 |
| 5-6 palabras | 75 |
| 7-8 palabras | 100 |

**C√≥digo de referencia:**
```python
if n_palabras <= 2: 
    score27 = 20
elif n_palabras <= 4: 
    score27 = 50
elif n_palabras <= 6: 
    score27 = 75
else: 
    score27 = 100
```

#### C√°lculo de Subfactores:

```python
Atencion = (score7 + score8 + score10) / 3  # 0-100
Memoria = (score9 + score27) / 2  # 0-100
Claridad = (score12 + score29) / 2  # 0-100
Productividad = score11  # 0-100
EstresSueno = (score13 + score17) / 2  # 0-100
```

#### C√°lculo de ECF Global:

```python
ECF = (0.30 * Atencion) + \
      (0.20 * Memoria) + \
      (0.20 * Claridad) + \
      (0.10 * Productividad) + \
      (0.20 * EstresSueno)
# Resultado: 0-100
```

---

### 2.3 C√ÅLCULO DEL EFC (Estado F√≠sico para el Cerebro)

**Preguntas implicadas**: 18, 19, 20, 21

#### Tabla de Transformaci√≥n:

**Q18 - Frecuencia de ejercicio:**
| Respuesta | Score |
|-----------|-------|
| 0 d√≠as | 0 |
| 1-2 d√≠as | 40 |
| 3-4 d√≠as | 70 |
| 5 o m√°s d√≠as | 100 |

**Q19 - Tipo de actividad:**
| Opci√≥n | Score |
|--------|-------|
| Gimnasio (aer√≥bico + fuerza) | 100 |
| Correr/Ciclismo (solo aer√≥bico) | 70 |
| Pesas (solo fuerza) | 70 |
| Deportes recreativos | 70 |
| Yoga/Pilates | 60 |
| Caminar | 50 |
| Ninguna | 0 |
| Otro | 50 (por defecto) |

**Q20 - Autoevaluaci√≥n f√≠sica:**
```python
score20 = (r20 - 1) * 25  # Likert positiva
```

**Q21 - Limitaciones f√≠sicas:**
```python
score21 = -20 if tiene_limitaciones else 0  # Penalizaci√≥n
```

#### C√°lculo de EFC:

```python
BaseEFC = (0.35 * score18) + \
          (0.25 * score19) + \
          (0.30 * score20)  # 0-100

EFC = BaseEFC + score21  # score21 es 0 o -20

# Limitar entre 0 y 100
if EFC < 0: 
    EFC = 0
if EFC > 100: 
    EFC = 100
```

---

### 2.4 C√ÅLCULO DEL NSC (Nutrici√≥n para la Salud Cerebral)

**Preguntas implicadas**: 22, 23, 24, 25, 26

#### Tabla de Transformaci√≥n:

**Q22 - Frecuencia de pescado:**
| Respuesta | Score |
|-----------|-------|
| Nunca | 0 |
| 1 vez al mes | 25 |
| 1 vez a la semana | 50 |
| 2-3 veces por semana | 80 |
| M√°s de 3 veces por semana | 100 |

**Q23 - Frecuencia aguacate:**
```python
score23 = (r23 - 1) * 25  # Likert positiva
```

**Q24 - Frutas/verduras diarias:**
| Respuesta | Score |
|-----------|-------|
| S√≠ | 100 |
| A veces | 60 |
| No | 0 |

**Q25 - Ultraprocesados (INVERSO):**
| Respuesta | Score |
|-----------|-------|
| 0 veces | 100 |
| 1-2 veces | 70 |
| 3-4 veces | 40 |
| 5+ veces | 0 |

**Q26 - Autoevaluaci√≥n alimentaci√≥n:**
```python
score26 = (r26 - 1) * 25  # Likert positiva
```

#### C√°lculo de NSC:

```python
NSC = (0.25 * score22) + \
      (0.25 * score24) + \
      (0.25 * score25) + \
      (0.15 * score23) + \
      (0.10 * score26)
# Resultado: 0-100
```

---

### 2.5 C√ÅLCULO DEL IBCY (√çndice de Bienestar Cognitivo Yakumama)

```python
IBCY = (0.50 * ECF) + \
       (0.25 * EFC) + \
       (0.25 * NSC)
# Resultado: 0-100
```

**Justificaci√≥n de los pesos:**
- ECF = 50% ‚Üí El componente cognitivo es central en el programa
- EFC = 25% ‚Üí La actividad f√≠sica influye significativamente
- NSC = 25% ‚Üí La nutrici√≥n influye significativamente

---

### 2.6 CLASIFICACI√ìN POR NIVELES

Para cada √≠ndice (ECF, EFC, NSC, IBCY):

```python
if score < 50: 
    nivel = "Principiante"
elif score < 75: 
    nivel = "Regular"
else: 
    nivel = "Avanzado"
```

---

## 3. VISUALIZACI√ìN: GR√ÅFICO RADAR (POL√çGONO)

### 3.1 Especificaciones del Gr√°fico

**Nombre del componente**: "Perfil Cognitivo Yakumama"

**Tipo**: Radar Chart / Spider Chart

**Ejes (3 ejes radiales)**:
1. ECF ‚Äì Estado Cognitivo Funcional (0-100)
2. EFC ‚Äì Estado F√≠sico para el Cerebro (0-100)
3. NSC ‚Äì Nutrici√≥n para la Salud Cerebral (0-100)

**Capas de datos** (para mostrar evoluci√≥n en el tiempo):
- **Capa 1** (gris claro, relleno 20%): Medici√≥n inicial (baseline)
- **Capa 2** (azul, relleno 30%): Medici√≥n intermedia (mes 1-2) - opcional
- **Capa 3** (verde, relleno 40%): Medici√≥n final (mes 3)

### 3.2 Interacciones del Usuario

- **Hover/Tap en v√©rtice**: Muestra tooltip con:
  - Nombre del eje (ej: "Nutrici√≥n para salud cerebral")
  - Puntaje exacto (ej: "NSC: 68/100")
  - Nivel (Principiante/Regular/Avanzado)

- **Leyenda din√°mica** con toggle:
  - ‚òê Inicial
  - ‚òê Intermedia (si existe)
  - ‚òê Final
  - El usuario puede activar/desactivar capas

### 3.3 Texto Interpretativo Autom√°tico

Debajo del gr√°fico, mostrar 2-3 mensajes autom√°ticos:

**Ejemplos**:
- "Has mejorado tu bienestar cognitivo global de 47 a 77 puntos."
- "Tu mayor avance fue en Nutrici√≥n para el cerebro (+34 puntos)."
- "Tu pilar dominante es: Estado F√≠sico para el Cerebro (75 puntos)."
- "Tu pilar a reforzar es: Estado Cognitivo Funcional (42 puntos)."

### 3.4 Librer√≠as Recomendadas

- **Chart.js** (con plugin radar)
- **Recharts** (React)
- **D3.js**
- **Highcharts** (radar plot)

### 3.5 Datos a Almacenar en Base de Datos

Crear tabla `evaluations` con campos:
```sql
- user_id
- evaluation_date (timestamp)
- evaluation_type (enum: 'initial', 'intermediate', 'final')
- ECF_score (float 0-100)
- EFC_score (float 0-100)
- NSC_score (float 0-100)
- IBCY_score (float 0-100)
- ECF_level (enum: 'Principiante', 'Regular', 'Avanzado')
- EFC_level
- NSC_level
- IBCY_level
- raw_responses (JSON con todas las respuestas del formulario)
```

---

## 4. ALGORITMO DE PERSONALIZACI√ìN AUTOM√ÅTICA

### 4.1 Entradas del Algoritmo

- ECF, EFC, NSC, IBCY (0-100)
- Nivel_ECF, Nivel_EFC, Nivel_NSC
- edad (para calcular grupo_edad: 25-40, 41-55, 56-60)
- objetivos[] (array de objetivos seleccionados en Q6)

### 4.2 Salidas del Algoritmo

- **Plan_Fisico**: nivel, frecuencia (d√≠as/semana), tipo de rutina
- **Plan_Cognitivo**: nivel, tareas por d√≠a, componentes espec√≠ficos
- **Plan_Nutricional**: nivel, snacks por semana, enfoque nutricional
- **Mensajes_Clave**: 2-3 mensajes personalizados de feedback

### 4.3 L√≥gica en Pseudoc√≥digo

```python
# 1. CLASIFICACI√ìN GLOBAL
nivel_global = clasificar(IBCY)

# 2. PLAN F√çSICO
if EFC < 50:
    Plan_Fisico.nivel = "Principiante"
    Plan_Fisico.frecuencia = 3  # d√≠as/semana
    Plan_Fisico.tipo = "Caminatas + calistenia suave"
elif EFC < 75:
    Plan_Fisico.nivel = "Intermedio"
    Plan_Fisico.frecuencia = 4
    Plan_Fisico.tipo = "Cardio moderado + fuerza ligera"
else:
    Plan_Fisico.nivel = "Avanzado"
    Plan_Fisico.frecuencia = 5
    Plan_Fisico.tipo = "Cardio + fuerza/HIIT adaptado"

# 3. PLAN COGNITIVO
if ECF < 50:
    Plan_Cognitivo.nivel = "Intensivo"
    Plan_Cognitivo.tareas_dia = 2
    Plan_Cognitivo.componentes = [
        "Lectura guiada", 
        "Ejercicios de memoria", 
        "Meditaci√≥n corta diaria"
    ]
elif ECF < 75:
    Plan_Cognitivo.nivel = "Moderado"
    Plan_Cognitivo.tareas_dia = 1
    Plan_Cognitivo.componentes = [
        "Ejercicios de enfoque", 
        "Meditaci√≥n 3x semana"
    ]
else:
    Plan_Cognitivo.nivel = "Mantenimiento"
    Plan_Cognitivo.tareas_dia = 1
    Plan_Cognitivo.componentes = [
        "Retos cognitivos 3x semana"
    ]

# 4. PLAN NUTRICIONAL
if NSC < 50:
    Plan_Nutricional.nivel = "Reestructuraci√≥n"
    Plan_Nutricional.snacks_por_semana = 7
    Plan_Nutricional.enfoque = [
        "Pescado", 
        "Aguacate", 
        "Frutas", 
        "Eliminar ultraprocesados"
    ]
elif NSC < 75:
    Plan_Nutricional.nivel = "Optimizaci√≥n"
    Plan_Nutricional.snacks_por_semana = 4
    Plan_Nutricional.enfoque = [
        "A√±adir omega-3", 
        "Reducir fritos"
    ]
else:
    Plan_Nutricional.nivel = "Mantenimiento"
    Plan_Nutricional.snacks_por_semana = 2
    Plan_Nutricional.enfoque = [
        "Mantener patrones actuales"
    ]

# 5. AJUSTES POR OBJETIVOS ESPEC√çFICOS
if "Mejorar enfoque y claridad mental" in objetivos:
    Plan_Cognitivo.tareas_dia += 1
    Plan_Cognitivo.componentes.append("Ejercicios extra de atenci√≥n")

if "Manejar mejor el estr√©s" in objetivos:
    Plan_Cognitivo.componentes.append("Meditaci√≥n/respiraci√≥n guiada diaria")

if "Recuperar energ√≠a" in objetivos or "Ser m√°s productivo" in objetivos:
    Plan_Fisico.frecuencia += 1  # si no excede 5
    Plan_Cognitivo.componentes.append("Bloques de trabajo profundo (deep work) 3x semana")

if "Fortalecer la inmunidad" in objetivos:
    Plan_Nutricional.enfoque.append("Frutas ricas en vitamina C")

# 6. AJUSTES POR EDAD
grupo_edad = calcular_grupo_edad(edad)

if grupo_edad == "25-40":
    # Foco en rendimiento y prevenci√≥n
    # Permitir m√°s intensidad f√≠sica si no hay limitaciones
    if not tiene_limitaciones_fisicas:
        aumentar_intensidad_fisica()
        
elif grupo_edad == "41-55":
    # Foco en balance y control de estr√©s
    Plan_Cognitivo.componentes.append("H√°bitos de sue√±o")
    
elif grupo_edad == "56-60":
    # Foco en protecci√≥n y seguridad
    reducir_intensidad_fisica_maxima()
    enfatizar_movilizacion_suave_y_equilibrio()

# 7. ALERTAS AUTOM√ÅTICAS POR DESBALANCE
if NSC < 40 and (EFC > 60 or ECF > 60):
    agregar_alerta(
        "Tu nutrici√≥n para el cerebro est√° por debajo de tu nivel f√≠sico y cognitivo. " +
        "Te sugerimos iniciar con el Plan Nutricional Reestructuraci√≥n."
    )

if EFC > 75 and ECF < 50:
    agregar_alerta(
        "Tienes excelente condici√≥n f√≠sica, pero tu nivel cognitivo necesita atenci√≥n. " +
        "Prioriza las tareas cognitivas antes de aumentar m√°s la exigencia f√≠sica."
    )

# 8. GENERAR MENSAJES CLAVE
Mensajes_Clave = []

# Mensaje 1: Resumen global
if IBCY < 50:
    Mensajes_Clave.append(f"Tu bienestar cognitivo est√° en nivel Principiante ({IBCY:.0f}/100). ¬°Es el momento perfecto para comenzar tu transformaci√≥n!")
elif IBCY < 75:
    Mensajes_Clave.append(f"Tu bienestar cognitivo est√° en nivel Regular ({IBCY:.0f}/100). Con dedicaci√≥n, alcanzar√°s el nivel Avanzado.")
else:
    Mensajes_Clave.append(f"¬°Excelente! Tu bienestar cognitivo est√° en nivel Avanzado ({IBCY:.0f}/100). Mant√©n tus h√°bitos y contin√∫a mejorando.")

# Mensaje 2: Pilar dominante
pilar_max = max([(ECF, "Estado Cognitivo"), (EFC, "Estado F√≠sico"), (NSC, "Nutrici√≥n")])
Mensajes_Clave.append(f"Tu pilar m√°s fuerte es {pilar_max[1]} con {pilar_max[0]:.0f} puntos.")

# Mensaje 3: Pilar a reforzar
pilar_min = min([(ECF, "Estado Cognitivo"), (EFC, "Estado F√≠sico"), (NSC, "Nutrici√≥n")])
Mensajes_Clave.append(f"Tu √°rea de oportunidad es {pilar_min[1]} con {pilar_min[0]:.0f} puntos. Enf√≥cate aqu√≠ para lograr un crecimiento balanceado.")
```

### 4.4 Visualizaci√≥n del Panel de Recomendaciones

Despu√©s de mostrar el gr√°fico radar, mostrar un panel con:

**Estructura sugerida:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  TU PLAN PERSONALIZADO YAKUMAMA LIFESTYLE          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  üèÉ PLAN F√çSICO - [Nivel]                          ‚îÇ
‚îÇ  ‚Ä¢ Frecuencia: X d√≠as por semana                   ‚îÇ
‚îÇ  ‚Ä¢ Tipo: [descripci√≥n]                             ‚îÇ
‚îÇ  [Ver rutinas ‚Üí]                                   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  üß† PLAN COGNITIVO - [Nivel]                       ‚îÇ
‚îÇ  ‚Ä¢ Tareas diarias: X                               ‚îÇ
‚îÇ  ‚Ä¢ Componentes: [lista]                            ‚îÇ
‚îÇ  [Ver ejercicios ‚Üí]                                ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ü•ë PLAN NUTRICIONAL - [Nivel]                     ‚îÇ
‚îÇ  ‚Ä¢ Snacks semanales: X                             ‚îÇ
‚îÇ  ‚Ä¢ Enfoque: [lista]                                ‚îÇ
‚îÇ  [Ver recetas ‚Üí]                                   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  üí¨ MENSAJES CLAVE:                                ‚îÇ
‚îÇ  ‚Ä¢ [Mensaje 1]                                     ‚îÇ
‚îÇ  ‚Ä¢ [Mensaje 2]                                     ‚îÇ
‚îÇ  ‚Ä¢ [Mensaje 3]                                     ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  [Comenzar mi programa ‚Üí]                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 5. FLUJO DE USUARIO COMPLETO

### 5.1 Paso 1: Landing del Formulario

**URL**: `/evaluacion-inicial`

**Contenido a mostrar**:
- T√≠tulo: "Evaluaci√≥n de Bienestar Cognitivo Yakumama Lifestyle"
- Subt√≠tulo: "Duraci√≥n aproximada: 7-10 minutos"
- Descripci√≥n: "Conoce tu estado actual de bienestar cognitivo, h√°bitos f√≠sicos y nutricionales para dise√±ar tu plan personalizado."
- Nota de confidencialidad: "Tus respuestas son completamente confidenciales"
- Bot√≥n CTA: "Comenzar evaluaci√≥n"

### 5.2 Paso 2: Formulario Multi-Step

**Implementaci√≥n sugerida**: Formulario de m√∫ltiples p√°ginas (wizard)

**Navegaci√≥n**:
- Progress bar en la parte superior mostrando % de completado
- Indicadores visuales de secciones: A ‚Üí B ‚Üí C ‚Üí D ‚Üí E ‚Üí F ‚Üí G ‚Üí H ‚Üí I ‚Üí J
- Botones "Anterior" y "Siguiente" en cada paso
- En el √∫ltimo paso (J), bot√≥n "Enviar evaluaci√≥n"

**Validaci√≥n**:
- Validaci√≥n en tiempo real por campo
- Mensajes de error claros y espec√≠ficos
- No permitir avanzar si hay campos obligatorios sin completar
- Mostrar resumen de errores si intenta enviar con campos faltantes

**Auto-guardado** (opcional pero recomendado):
- Guardar progreso en localStorage cada 30 segundos
- Si el usuario abandona y regresa, ofrecer continuar desde donde dej√≥
- Al completar exitosamente, limpiar localStorage

### 5.3 Paso 3: Procesamiento y C√°lculo

Al enviar el formulario:

1. **Validaci√≥n final en backend**
2. **C√°lculo de scores**:
   - Calcular score27 (contar palabras recordadas)
   - Normalizar todas las respuestas a 0-100
   - Calcular subfactores (Atenci√≥n, Memoria, Claridad, etc.)
   - Calcular ECF, EFC, NSC
   - Calcular IBCY
   - Determinar niveles
3. **Ejecutar algoritmo de personalizaci√≥n**
4. **Guardar en base de datos**:
   - Tabla `users`: informaci√≥n general
   - Tabla `evaluations`: scores y niveles
   - Tabla `evaluation_responses`: respuestas raw
   - Tabla `personalized_plans`: plan generado
5. **Generar mensaje de √©xito**

### 5.4 Paso 4: P√°gina de Resultados

**URL**: `/resultados/[evaluation_id]`

**Secciones a mostrar**:

1. **Hero Section**:
   - T√≠tulo: "¬°Tu Evaluaci√≥n est√° Completa!"
   - IBCY Score grande: "75/100"
   - Badge de nivel: "Regular" con color
   - Mensaje motivacional personalizado

2. **Gr√°fico Radar**:
   - Visualizaci√≥n del pol√≠gono con 3 ejes
   - Tooltips interactivos
   - Leyenda

3. **Desglose por Dominio**:
   - Tarjetas individuales para ECF, EFC, NSC
   - Cada tarjeta muestra:
     - Icono
     - Nombre del dominio
     - Score num√©rico
     - Nivel (badge)
     - Interpretaci√≥n breve (1-2 l√≠neas)

4. **Plan Personalizado**:
   - Panel con Plan F√≠sico, Cognitivo y Nutricional
   - Mensajes clave
   - CTAs a secciones del programa

5. **Pr√≥ximos Pasos**:
   - Bot√≥n: "Ver mi plan completo"
   - Bot√≥n: "Descargar resultados PDF"
   - Bot√≥n: "Compartir resultados"
   - Informaci√≥n sobre seguimiento: "Pr√≥xima evaluaci√≥n en 1 mes"

### 5.5 Paso 5: Seguimiento (Evaluaciones Futuras)

**Evaluaciones posteriores**:
- Intermedia (mes 1-2)
- Final (mes 3)

**Diferencias con la evaluaci√≥n inicial**:
- Formulario id√©ntico
- Al generar gr√°fico radar, superponer:
  - Baseline (gris)
  - Evaluaci√≥n actual (color)
- Mostrar tabla comparativa con deltas:
  
  ```
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ Dominio  ‚îÇ Inicial ‚îÇ Actual ‚îÇ Cambio ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ ECF      ‚îÇ   42    ‚îÇ   68   ‚îÇ  +26   ‚îÇ
  ‚îÇ EFC      ‚îÇ   55    ‚îÇ   70   ‚îÇ  +15   ‚îÇ
  ‚îÇ NSC      ‚îÇ   48    ‚îÇ   82   ‚îÇ  +34   ‚îÇ
  ‚îÇ IBCY     ‚îÇ   47    ‚îÇ   72   ‚îÇ  +25   ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  ```

- Mensajes de celebraci√≥n de progreso:
  - "¬°Incre√≠ble! Has mejorado tu IBCY en 25 puntos"
  - "Tu mayor avance fue en Nutrici√≥n (+34 puntos)"
  - Si hay retroceso: mensajes de apoyo y ajuste de plan

---

## 6. ESPECIFICACIONES T√âCNICAS DE IMPLEMENTACI√ìN

### 6.1 Stack Tecnol√≥gico Recomendado

**Frontend**:
- React.js o Next.js
- TypeScript (fuertemente recomendado)
- Librer√≠a de formularios: React Hook Form o Formik
- Validaci√≥n: Zod o Yup
- Gr√°ficos: Recharts o Chart.js
- Estilos: Tailwind CSS o styled-components

**Backend**:
- Node.js + Express o Next.js API Routes
- Base de datos: PostgreSQL o MongoDB
- ORM: Prisma (si PostgreSQL) o Mongoose (si MongoDB)

### 6.2 Estructura de Base de Datos

```sql
-- Tabla: users
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(255) NOT NULL,
  age INTEGER,
  city VARCHAR(255),
  country VARCHAR(255),
  occupation VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Tabla: evaluations
CREATE TABLE evaluations (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  evaluation_type VARCHAR(50) NOT NULL, -- 'initial', 'intermediate', 'final'
  evaluation_date TIMESTAMP DEFAULT NOW(),
  
  -- Scores
  ecf_score DECIMAL(5,2),
  efc_score DECIMAL(5,2),
  nsc_score DECIMAL(5,2),
  ibcy_score DECIMAL(5,2),
  
  -- Niveles
  ecf_level VARCHAR(20), -- 'Principiante', 'Regular', 'Avanzado'
  efc_level VARCHAR(20),
  nsc_level VARCHAR(20),
  ibcy_level VARCHAR(20),
  
  -- Subfactores (opcional, para an√°lisis detallado)
  atencion_score DECIMAL(5,2),
  memoria_score DECIMAL(5,2),
  claridad_score DECIMAL(5,2),
  productividad_score DECIMAL(5,2),
  estres_sueno_score DECIMAL(5,2),
  
  created_at TIMESTAMP DEFAULT NOW()
);

-- Tabla: evaluation_responses (almacena respuestas individuales)
CREATE TABLE evaluation_responses (
  id SERIAL PRIMARY KEY,
  evaluation_id INTEGER REFERENCES evaluations(id) ON DELETE CASCADE,
  question_number INTEGER NOT NULL,
  question_text TEXT,
  response_value TEXT, -- almacenar como JSON o texto
  normalized_score DECIMAL(5,2), -- score normalizado 0-100
  created_at TIMESTAMP DEFAULT NOW()
);

-- Tabla: personalized_plans
CREATE TABLE personalized_plans (
  id SERIAL PRIMARY KEY,
  evaluation_id INTEGER REFERENCES evaluations(id) ON DELETE CASCADE,
  
  -- Plan F√≠sico
  plan_fisico_nivel VARCHAR(50),
  plan_fisico_frecuencia INTEGER,
  plan_fisico_tipo TEXT,
  
  -- Plan Cognitivo
  plan_cognitivo_nivel VARCHAR(50),
  plan_cognitivo_tareas_dia INTEGER,
  plan_cognitivo_componentes JSON, -- array de strings
  
  -- Plan Nutricional
  plan_nutricional_nivel VARCHAR(50),
  plan_nutricional_snacks_semana INTEGER,
  plan_nutricional_enfoque JSON, -- array de strings
  
  -- Mensajes clave
  mensajes_clave JSON, -- array de strings
  
  created_at TIMESTAMP DEFAULT NOW()
);

-- Tabla: objetivos (relaci√≥n many-to-many)
CREATE TABLE user_objectives (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  evaluation_id INTEGER REFERENCES evaluations(id) ON DELETE CASCADE,
  objetivo VARCHAR(255) NOT NULL,
  otro_texto TEXT, -- si seleccion√≥ "Otro"
  created_at TIMESTAMP DEFAULT NOW()
);

-- √çndices para optimizaci√≥n
CREATE INDEX idx_evaluations_user_id ON evaluations(user_id);
CREATE INDEX idx_evaluations_type ON evaluations(evaluation_type);
CREATE INDEX idx_evaluation_responses_eval_id ON evaluation_responses(evaluation_id);
```

### 6.3 API Endpoints Necesarios

```
POST   /api/evaluations              - Crear nueva evaluaci√≥n
GET    /api/evaluations/:id          - Obtener evaluaci√≥n espec√≠fica
GET    /api/users/:userId/evaluations - Listar evaluaciones de un usuario
POST   /api/evaluations/:id/calculate - Calcular scores (si se hace post-submit)
GET    /api/evaluations/:id/plan     - Obtener plan personalizado
GET    /api/evaluations/:id/pdf      - Generar PDF de resultados
```

### 6.4 L√≥gica de C√°lculo (C√≥digo de Referencia)

**Archivo**: `utils/calculateScores.js` o `calculateScores.ts`

```javascript
// Funci√≥n principal
export function calculateIBCY(responses) {
  // 1. Calcular ECF
  const ecf = calculateECF(responses);
  
  // 2. Calcular EFC
  const efc = calculateEFC(responses);
  
  // 3. Calcular NSC
  const nsc = calculateNSC(responses);
  
  // 4. Calcular IBCY
  const ibcy = (0.50 * ecf) + (0.25 * efc) + (0.25 * nsc);
  
  return {
    ecf: parseFloat(ecf.toFixed(2)),
    efc: parseFloat(efc.toFixed(2)),
    nsc: parseFloat(nsc.toFixed(2)),
    ibcy: parseFloat(ibcy.toFixed(2)),
    ecf_level: classifyLevel(ecf),
    efc_level: classifyLevel(efc),
    nsc_level: classifyLevel(nsc),
    ibcy_level: classifyLevel(ibcy)
  };
}

// Clasificaci√≥n de niveles
function classifyLevel(score) {
  if (score < 50) return 'Principiante';
  if (score < 75) return 'Regular';
  return 'Avanzado';
}

// Normalizaci√≥n Likert positiva
function normalizeLikertPositive(value) {
  return (value - 1) * 25;
}

// Normalizaci√≥n Likert negativa
function normalizeLikertNegative(value) {
  return (5 - value) * 25;
}

// C√°lculo ECF
function calculateECF(responses) {
  const { q7, q8, q9, q10, q11, q12, q13, q17, q27, q28, q29 } = responses;
  
  // Normalizar scores
  const score7 = normalizeLikertNegative(q7);
  const score8 = normalizeLikertNegative(q8);
  const score10 = normalizeLikertNegative(q10);
  const score9 = normalizeLikertPositive(q9);
  const score27 = calculateMemoryScore(q27); // funci√≥n especial
  const score12 = normalizeLikertPositive(q12);
  const score29 = normalizeLikertPositive(q29);
  const score11 = normalizeLikertPositive(q11);
  const score13 = normalizeLikertNegative(q13);
  const score17 = normalizeLikertPositive(q17);
  
  // Calcular subfactores
  const atencion = (score7 + score8 + score10) / 3;
  const memoria = (score9 + score27) / 2;
  const claridad = (score12 + score29) / 2;
  const productividad = score11;
  const estresSueno = (score13 + score17) / 2;
  
  // ECF ponderado
  const ecf = (0.30 * atencion) + 
              (0.20 * memoria) + 
              (0.20 * claridad) + 
              (0.10 * productividad) + 
              (0.20 * estresSueno);
  
  return ecf;
}

// C√°lculo score memoria (Q27)
function calculateMemoryScore(palabrasRecordadas) {
  // palabrasRecordadas es un string, hay que parsearlo
  const palabrasOriginales = ['sol', 'agua', 'libro', 'verde', 'camino', 'nube', 'tiempo', 'mano'];
  const palabrasUsuario = palabrasRecordadas.toLowerCase()
    .split(/[\s,]+/) // separar por espacios o comas
    .map(p => p.trim())
    .filter(p => p.length > 0);
  
  // Contar coincidencias
  let count = 0;
  palabrasUsuario.forEach(palabra => {
    if (palabrasOriginales.includes(palabra)) {
      count++;
    }
  });
  
  // Asignar score seg√∫n tabla
  if (count <= 2) return 20;
  if (count <= 4) return 50;
  if (count <= 6) return 75;
  return 100;
}

// C√°lculo EFC
function calculateEFC(responses) {
  const { q18, q19, q20, q21 } = responses;
  
  // Score Q18
  const score18Map = { '0': 0, '1-2': 40, '3-4': 70, '5+': 100 };
  const score18 = score18Map[q18] || 0;
  
  // Score Q19
  const score19Map = {
    'gimnasio': 100,
    'correr': 70,
    'ciclismo': 70,
    'deportes': 70,
    'yoga': 60,
    'pilates': 60,
    'caminar': 50,
    'ninguna': 0,
    'otro': 50
  };
  const score19 = score19Map[q19.toLowerCase()] || 50;
  
  // Score Q20
  const score20 = normalizeLikertPositive(q20);
  
  // Score Q21 (penalizaci√≥n)
  const score21 = (q21 && q21.length > 0) ? -20 : 0;
  
  // EFC ponderado
  let efc = (0.35 * score18) + (0.25 * score19) + (0.30 * score20) + score21;
  
  // Limitar entre 0 y 100
  if (efc < 0) efc = 0;
  if (efc > 100) efc = 100;
  
  return efc;
}

// C√°lculo NSC
function calculateNSC(responses) {
  const { q22, q23, q24, q25, q26 } = responses;
  
  // Score Q22
  const score22Map = {
    'nunca': 0,
    '1_mes': 25,
    '1_semana': 50,
    '2-3_semana': 80,
    '3+_semana': 100
  };
  const score22 = score22Map[q22] || 0;
  
  // Score Q23
  const score23 = normalizeLikertPositive(q23);
  
  // Score Q24
  const score24Map = { 'si': 100, 'a_veces': 60, 'no': 0 };
  const score24 = score24Map[q24] || 0;
  
  // Score Q25 (inverso)
  const score25Map = { '0': 100, '1-2': 70, '3-4': 40, '5+': 0 };
  const score25 = score25Map[q25] || 0;
  
  // Score Q26
  const score26 = normalizeLikertPositive(q26);
  
  // NSC ponderado
  const nsc = (0.25 * score22) + 
              (0.25 * score24) + 
              (0.25 * score25) + 
              (0.15 * score23) + 
              (0.10 * score26);
  
  return nsc;
}
```

---

## 7. CONSIDERACIONES DE UX/UI

### 7.1 Dise√±o Visual

- **Color primario**: Verde (#2ECC71) asociado a salud y bienestar
- **Color secundario**: Azul (#3498DB) para confianza
- **Color de acento**: Naranja (#E67E22) para CTAs
- **Tipograf√≠a**: Sans-serif moderna (Inter, Poppins, o similar)
- **Iconograf√≠a**: Usar √≠conos consistentes (Feather Icons, Heroicons, etc.)

### 7.2 Responsive Design

- **Mobile-first**: El formulario debe ser completamente funcional en m√≥viles
- **Breakpoints**:
  - Mobile: < 768px
  - Tablet: 768px - 1024px
  - Desktop: > 1024px
- **Gr√°fico radar**: Debe ajustarse bien en pantallas peque√±as (posiblemente versi√≥n simplificada)

### 7.3 Accesibilidad

- Labels claros para todos los inputs
- Contraste de colores WCAG AA
- Navegaci√≥n por teclado funcional
- Screen reader friendly
- Mensajes de error descriptivos

### 7.4 Microinteracciones

- Transiciones suaves entre pasos del formulario
- Animaci√≥n al completar cada secci√≥n
- Feedback visual al seleccionar opciones
- Loading states durante c√°lculos
- Celebraci√≥n visual al completar (confetti opcional)

---

## 8. TESTING Y VALIDACI√ìN

### 8.1 Test Cases Cr√≠ticos

1. **Validaci√≥n de campos obligatorios**
   - Intentar enviar sin completar campos requeridos
   - Verificar mensajes de error

2. **Validaci√≥n de Q27 (memoria)**
   - Probar con 0, 3, 6, 8 palabras
   - Verificar c√°lculo correcto del score
   - Probar con may√∫sculas/min√∫sculas
   - Probar con palabras incorrectas

3. **C√°lculo de scores**
   - Crear casos de prueba con valores conocidos
   - Verificar que ECF, EFC, NSC, IBCY se calculan correctamente
   - Validar ponderaciones

4. **Algoritmo de personalizaci√≥n**
   - Probar con diferentes combinaciones de scores
   - Verificar que se generan planes correctos
   - Validar ajustes por edad y objetivos

5. **Gr√°fico radar**
   - Verificar que se renderiza correctamente
   - Probar con valores extremos (0, 50, 100)
   - Validar tooltips e interactividad

### 8.2 Test Data

Crear usuarios de prueba con perfiles variados:

**Usuario A - Principiante Total**:
- Todas las respuestas negativas en su m√°ximo
- IBCY esperado: ~20-30

**Usuario B - Regular Balanceado**:
- Respuestas mixtas
- IBCY esperado: ~55-65

**Usuario C - Avanzado**:
- Todas las respuestas positivas en su m√°ximo
- IBCY esperado: ~90-100

---

## 9. ENTREGABLES FINALES

### 9.1 Para el Cliente

1. **Formulario web funcional** en producci√≥n
2. **Panel de resultados** con gr√°fico radar
3. **Sistema de personalizaci√≥n** autom√°tica
4. **Base de datos** configurada y poblada
5. **Documentaci√≥n de usuario**
6. **Manual de administraci√≥n**

### 9.2 Para el Equipo de Desarrollo

1. **C√≥digo fuente** completo y documentado
2. **README** con instrucciones de instalaci√≥n
3. **Documentaci√≥n t√©cnica** de API
4. **Tests** unitarios e integraci√≥n
5. **Scripts de deployment**
6. **Variables de entorno** de ejemplo

---

## 10. PR√ìXIMOS PASOS (POST-LANZAMIENTO)

1. **Monitoreo de uso**:
   - Google Analytics o Mixpanel
   - Tracking de abandono por secci√≥n
   - Tiempo promedio de completado

2. **Iteraci√≥n basada en feedback**:
   - Encuesta post-evaluaci√≥n
   - An√°lisis de preguntas problem√°ticas
   - Ajuste de algoritmo de personalizaci√≥n

3. **Features adicionales**:
   - Dashboard de usuario con hist√≥rico
   - Comparativas con poblaci√≥n
   - Exportaci√≥n de resultados en PDF
   - Integraci√≥n con Instagram (si aplicable)
   - Sistema de recordatorios

---

## RESUMEN EJECUTIVO PARA EL AGENTE

**Tu misi√≥n es desarrollar:**

1. ‚úÖ Un formulario de 35 preguntas dividido en 10 secciones (A-J)
2. ‚úÖ Sistema de c√°lculo que procese las respuestas y genere 4 scores (ECF, EFC, NSC, IBCY) en escala 0-100
3. ‚úÖ Gr√°fico radar interactivo que visualice los 3 dominios principales (ECF, EFC, NSC)
4. ‚úÖ Algoritmo de personalizaci√≥n que genere planes autom√°ticos basados en los scores
5. ‚úÖ P√°gina de resultados que muestre scores, gr√°fico, clasificaci√≥n y plan personalizado
6. ‚úÖ Base de datos que almacene usuarios, evaluaciones, respuestas y planes

**Prioridades t√©cnicas:**
- Validaci√≥n robusta de datos
- C√°lculos matem√°ticos precisos seg√∫n las tablas especificadas
- UX fluida y responsive
- C√≥digo limpio y mantenible
- Testing de casos cr√≠ticos

**Este documento contiene TODA la informaci√≥n necesaria. No omitas ning√∫n detalle en tu implementaci√≥n.**

¬øAlguna duda antes de comenzar el desarrollo?